<html>
<head>
  <!-- meta tags -->
  <script
    is="quantcast"
    src="https://cdn.amomama.de/hackathon/scripts/quantcast.min.js"
  ></script>
  <script
    async
    crossorigin="anonymous"
    data-cfasync="false"
    id="kueezrtb_latest"
    src="https://static.kueezrtb.com/latest.js"
  ></script>
  <script async src="//www.googletagservices.com/tag/js/gpt.js"></script>
  <script
    async
    src="https://cdn.amoanimals.com/prebiders/65df2430c6119531530487.js"
  ></script>
  <!-- Optional (if you want to use embedo) -->
  <!-- begin -->
  <script async src="https://unpkg.com/embedo/embedo.min.js"></script>
  <!-- you can change LAZY (embedo) if you want -->
  <script src="https://cdn.amomama.de/hackathon/scripts/lazy-embedo.js"></script>
  <!-- end -->
</head>
<body>
<app-root></app-root>

<script src="https://cdn.amomama.de/hackathon/scripts/adv.min.js"></script>
<script>
  // set player
  // const vidazoo = document.createElement("script");
  // vidazoo.async = true;
  // vidazoo.src = "https://static.vidazoo.com/basev/vwpt.js";
  // vidazoo.setAttribute("data-widget-id", "5f7c82bd819a8b00049dd9d6");
  // document.getElementById("vidazoo").appendChild(vidazoo);

  // set first banner (with id in_article_1)
  // window.pbjs.que.push(function () {
  //   window.pbjs.requestBids({
  //     timeout: 1000,
  //     adUnitCodes: ["in_article_1"],
  //     bidsBackHandler: function () {
  //       window.pbjs.setTargetingForGPTAsync(["in_article_1"]);
  //
  //       const target = googletag
  //         .pubads()
  //         .getSlots()
  //         .find((slot) => slot.getSlotElementId() === "in_article_1");
  //
  //       target && googletag.pubads().refresh([target]);
  //     },
  //   });
  // });npm install @types/protobufjs --save

  (() => {
    if (sessionStorage.getItem("firstVisit") === "true") {
      alert("RELOAD!");
      sessionStorage.removeItem("firstVisit");
    }

    sessionStorage.setItem("firstVisit", "true");

    const scrollDelay = 350;
    const scrollDistance = 15;
    const intervalScroll = setInterval(() => {
      window.scroll({
        top: window.scrollY + scrollDistance,
        left: 0,
        behavior: "smooth",
      });
    }, scrollDelay);

    const waitEmbedo = setInterval(() => {
      if (window.Embedo) {
        clearInterval(waitEmbedo);

        const embedo = new Embedo({twitter: true});

        const observer = new IntersectionObserver(
          (entries) => {
            entries.forEach((entry) => {
              if (entry.isIntersecting) {
                embedo.load(entry.target, entry.target.dataset.frameUrl);
                embedo.render();
                observer.unobserve(entry.target);
              }
            });
          },
          {threshold: 1, rootMargin: `${window.innerHeight}px`}
        );

        document.querySelectorAll("[data-frame-url]").forEach((element) => {
          observer.observe(element);
        });
      }
    });
  })();
</script>
</body>
</html>
